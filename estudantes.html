
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>testando</title>
</head>
<body>
  <style>
 body {
 margin: 0px;
 }
 
 header {
 background: #456;
 padding: 20px;
 }
  .logo {
  color: orange;
  font-weight: bolder;
  font-size: 20px;
  text-align: center;
  }
 
  .arrow {
  display: inline-block;
  width: 12px;
  height: 12px;
  border-top: 2px solid orange;
  border-right: 2px solid orange;
  transform: rotate(-130deg);
  position: absolute;
  top: 24px;
  left: 15px;
}
  
  .titulo {
  color: #444;
  font-weight: none;
  text-align: center;
  margin-top: 30px;
  margin-bottom: 0px;
}
  
  
   #container {
  color: black;
  font-weight: none;
  text-align: center;
  margin-top: 50px;
  margin-bottom: 50px;
}
  
 </style>
 
 
 <header>
  <div class="logo">Meus estudantes</div>
 </header>
 <a href="painel.html">
 <span class="arrow"></span>
 </a>
 </div>

 <div class="titulo">Clique em cima para visualizar os Dados</div>
</div>
</div>
 <div id="container">Carregando dados...</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCWH18dhHz0EBY5Ycc4wjZ1H6AlO-51sho",
  authDomain: "teste1-66092.firebaseapp.com",
  projectId: "teste1-66092",
  storageBucket: "teste1-66092.firebasestorage.app",
  messagingSenderId: "517435649522",
  appId: "1:517435649522:web:a6826c13b1e2c5062acf6b",
  measurementId: "G-3GVBBV8W7C"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

async function buscarDados() {
  const container = document.getElementById("container");
  container.innerHTML = "<p>Carregando dados...</p>";

  try {
    const querySnapshot = await getDocs(collection(db, "Dados estud"));
    container.innerHTML = "";

    querySnapshot.forEach((docSnap) => {
      const dados = docSnap.data();
      const nome = dados.Nome || "Sem nome";

      const item = document.createElement("div");
      item.textContent = nome;
      item.style.cssText = `
        background: #111;
        color: lime;
        border: 2px solid lime;
        border-radius: 10px;
        padding: 12px;
        margin: 8px 0;
        cursor: pointer;
        font-family: Arial, sans-serif;
        transition: 0.3s;
      `;
      item.onmouseover = () => item.style.background = "#222";
      item.onmouseout = () => item.style.background = "#111";

      // ðŸ”¹ Sempre abre nova aba com URL absoluta e nome correto da pÃ¡gina
      const baseUrl = `${window.location.origin}${window.location.pathname.replace(/[^\/]*$/, '')}`;
      const url = `${baseUrl}revisitas.html?id=${docSnap.id}`;
      item.addEventListener("click", () => window.open(url, "_blank"));

      container.appendChild(item);
    });

    if (container.innerHTML === "") {
      container.innerHTML = "<p>Nenhum dado encontrado.</p>";
    }

  } catch (erro) {
    container.innerHTML = "<p style='color:red;'>Erro ao buscar dados no Firestore.</p>";
    console.error(erro);
  }
}

buscarDados();
</script>

